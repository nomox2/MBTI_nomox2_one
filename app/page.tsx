'use client';

import { useMemo, useState } from 'react';
import MBTIQuestionCard, { MBTIQuestionOption } from '@/components/MBTIQuestionCard';

type MBTIDimension = 'EI' | 'SN' | 'TF' | 'JP';

type MBTIQuestion = {
  id: string;
  prompt: string;
  dimension: MBTIDimension;
  options: MBTIQuestionOption[];
};

const QUESTIONS: MBTIQuestion[] = [
  {
    id: 'q1',
    prompt: '새로운 사람들과의 만남이 끝난 뒤 나는 주로 어떤 기분인가요?',
    dimension: 'EI',
    options: [
      {
        value: 'E',
        label: '더 에너지가 생기고 다음 만남이 기대돼요.',
        helper: '사람들과 함께할수록 활력을 얻어요.',
      },
      {
        value: 'I',
        label: '즐겁지만 한참 쉬어야 충전돼요.',
        helper: '혼자 있는 시간이 꼭 필요해요.',
      },
    ],
  },
  {
    id: 'q2',
    prompt: '주말 일정이 갑자기 비었을 때, 나는 어떻게 보내고 싶나요?',
    dimension: 'EI',
    options: [
      {
        value: 'E',
        label: '친구들에게 연락해 즉흥적으로 모임을 만들어요.',
        helper: '사람들과 함께할 계획을 찾게 돼요.',
      },
      {
        value: 'I',
        label: '혼자만의 취미 시간이나 휴식을 계획해요.',
        helper: '조용한 시간을 즐기며 재충전해요.',
      },
    ],
  },
  {
    id: 'q3',
    prompt: '중요한 발표를 앞두고 있을 때 나는?',
    dimension: 'EI',
    options: [
      {
        value: 'E',
        label: '혼자 연습하기보다 누군가에게 시범을 보이며 피드백을 받아요.',
        helper: '상호작용 속에서 자신감을 얻어요.',
      },
      {
        value: 'I',
        label: '먼저 혼자서 충분히 준비한 뒤 공유해요.',
        helper: '정리된 생각을 바탕으로 움직이는 편이에요.',
      },
    ],
  },
  {
    id: 'q4',
    prompt: '다른 사람들과 함께 일할 때 나는?',
    dimension: 'EI',
    options: [
      {
        value: 'E',
        label: '회의나 토론을 통해 아이디어를 발전시키는 편이에요.',
        helper: '협업 과정 자체에서 활력을 얻어요.',
      },
      {
        value: 'I',
        label: '개별 작업 후 정리된 결과를 공유하는 편이에요.',
        helper: '생각을 정리할 시간을 확보해야 집중돼요.',
      },
    ],
  },
  {
    id: 'q5',
    prompt: '큰 행사나 파티에 초대받았을 때 나는?',
    dimension: 'EI',
    options: [
      {
        value: 'E',
        label: '다양한 사람을 만날 기회라며 기쁘게 참석해요.',
        helper: '새로운 인연에서 자극을 받아요.',
      },
      {
        value: 'I',
        label: '참여 여부를 고민하며 분위기를 미리 상상해요.',
        helper: '익숙한 사람과 조용한 모임을 선호해요.',
      },
    ],
  },
  {
    id: 'q6',
    prompt: '의견을 나눠야 할 때 나는?',
    dimension: 'EI',
    options: [
      {
        value: 'E',
        label: '즉석에서 떠오르는 생각을 소리 내어 공유해요.',
        helper: '대화 속에서 아이디어가 발전해요.',
      },
      {
        value: 'I',
        label: '정리된 후에 메시지나 문서로 전달하는 편이에요.',
        helper: '숙고한 의견이 더 정확하다고 느껴요.',
      },
    ],
  },
  {
    id: 'q7',
    prompt: '새로운 취미를 시작할 때 나는?',
    dimension: 'EI',
    options: [
      {
        value: 'E',
        label: '동호회나 클래스에 바로 가입해 사람들과 배워요.',
        helper: '함께하는 과정에서 즐거움을 느껴요.',
      },
      {
        value: 'I',
        label: '혼자 자료를 찾아보며 천천히 익숙해져요.',
        helper: '스스로 탐색하며 몰입하는 시간이 좋아요.',
      },
    ],
  },
  {
    id: 'q8',
    prompt: '팀에서 리더 역할을 맡게 되면?',
    dimension: 'EI',
    options: [
      {
        value: 'E',
        label: '구성원들과 자주 만나 분위기를 북돋아요.',
        helper: '열린 소통으로 팀을 이끈다고 느껴요.',
      },
      {
        value: 'I',
        label: '명확한 기대치와 계획을 문서로 정리해 전달해요.',
        helper: '체계적인 구조가 있어야 안정감을 느껴요.',
      },
    ],
  },
  {
    id: 'q9',
    prompt: '길게 이어지는 휴가를 맞으면 나는?',
    dimension: 'EI',
    options: [
      {
        value: 'E',
        label: '친구들과 여행 루트를 짜고 활동적인 계획을 세워요.',
        helper: '함께 움직이며 추억을 만드는 걸 즐겨요.',
      },
      {
        value: 'I',
        label: '집과 가까운 곳에서 조용한 일정으로 충전해요.',
        helper: '일상 속 휴식과 개인 시간이 중요해요.',
      },
    ],
  },
  {
    id: 'q10',
    prompt: '새로운 직장을 처음 출근했을 때 나는?',
    dimension: 'EI',
    options: [
      {
        value: 'E',
        label: '먼저 동료들에게 다가가 인사하고 네트워크를 넓혀요.',
        helper: '관계를 통해 빠르게 적응한다고 느껴요.',
      },
      {
        value: 'I',
        label: '주변을 관찰하며 필요한 정보를 스스로 파악해요.',
        helper: '환경에 익숙해진 뒤 관계를 키워요.',
      },
    ],
  },
  {
    id: 'q11',
    prompt: '모르는 사람과의 짧은 대화를 마친 뒤 나는?',
    dimension: 'EI',
    options: [
      {
        value: 'E',
        label: '더 많은 이야기를 나누고 싶어져요.',
        helper: '새로운 관점을 듣는 게 즐거워요.',
      },
      {
        value: 'I',
        label: '필요한 소통만 했다는 안도감을 느껴요.',
        helper: '에너지 소비를 최소화하고 싶어요.',
      },
    ],
  },
  {
    id: 'q12',
    prompt: '아이디어 브레인스토밍 시간에 나는?',
    dimension: 'EI',
    options: [
      {
        value: 'E',
        label: '다른 사람의 생각을 듣고 즉각 반응하며 발전시켜요.',
        helper: '시너지 속에서 창의력이 올라요.',
      },
      {
        value: 'I',
        label: '미리 준비한 노트를 활용해 차분히 의견을 제시해요.',
        helper: '구조화된 아이디어가 더 설득력 있다고 느껴요.',
      },
    ],
  },
  {
    id: 'q13',
    prompt: '하루 일과가 끝난 뒤 나는?',
    dimension: 'EI',
    options: [
      {
        value: 'E',
        label: '지인들과 통화하거나 메시지를 하며 에너지를 충전해요.',
        helper: '사람들과의 교류가 하루를 마무리해요.',
      },
      {
        value: 'I',
        label: '조용한 공간에서 혼자만의 시간을 즐겨요.',
        helper: '내면을 돌아봐야 다음날 힘이 나요.',
      },
    ],
  },
  {
    id: 'q14',
    prompt: '새로운 정보를 배울 때 나는 어떤 방식을 선호하나요?',
    dimension: 'SN',
    options: [
      {
        value: 'S',
        label: '구체적인 예시와 실습을 통해 이해해요.',
        helper: '현실적인 사례가 있어야 마음이 놓여요.',
      },
      {
        value: 'N',
        label: '전체 흐름과 컨셉을 먼저 파악해요.',
        helper: '아이디어와 연결고리를 상상하는 편이에요.',
      },
    ],
  },
  {
    id: 'q15',
    prompt: '프로젝트 계획을 세울 때 나는?',
    dimension: 'SN',
    options: [
      {
        value: 'S',
        label: '현재 확보한 자원과 현실적인 일정부터 고려해요.',
        helper: '실행 가능한 계획을 중시해요.',
      },
      {
        value: 'N',
        label: '프로젝트가 만들어낼 미래 가능성을 먼저 상상해요.',
        helper: '비전과 아이디어가 동기를 줘요.',
      },
    ],
  },
  {
    id: 'q16',
    prompt: '설명을 들을 때 더 편안한 방식은?',
    dimension: 'SN',
    options: [
      {
        value: 'S',
        label: '단계별 지침과 명확한 예시가 있는 설명.',
        helper: '구체적인 디테일이 있어야 이해돼요.',
      },
      {
        value: 'N',
        label: '큰 그림과 목적을 강조하는 스토리텔링.',
        helper: '맥락과 의미가 있어야 집중돼요.',
      },
    ],
  },
  {
    id: 'q17',
    prompt: '영화를 볼 때 더 몰입되는 장르는?',
    dimension: 'SN',
    options: [
      {
        value: 'S',
        label: '현실적인 사건과 일상적인 감정을 담은 작품.',
        helper: '공감 가능한 상황이 마음을 사로잡아요.',
      },
      {
        value: 'N',
        label: '상상력 넘치는 세계관이나 상징이 담긴 작품.',
        helper: '새로운 의미를 해석하는 재미가 있어요.',
      },
    ],
  },
  {
    id: 'q18',
    prompt: '문제를 바라볼 때 나는?',
    dimension: 'SN',
    options: [
      {
        value: 'S',
        label: '지금 드러난 사실과 데이터를 우선 분석해요.',
        helper: '확실한 증거가 결정을 돕는다고 느껴요.',
      },
      {
        value: 'N',
        label: '장기적인 영향과 숨은 가능성을 함께 상상해요.',
        helper: '보이는 것 너머를 찾아봐야 안심돼요.',
      },
    ],
  },
  {
    id: 'q19',
    prompt: '취미 활동을 선택할 때 나는?',
    dimension: 'SN',
    options: [
      {
        value: 'S',
        label: '손으로 만들거나 직접 체험하는 활동을 선호해요.',
        helper: '감각적인 경험이 만족감을 줘요.',
      },
      {
        value: 'N',
        label: '아이디어를 자유롭게 표현하는 창작 활동을 선호해요.',
        helper: '새로운 콘셉트를 탐험하는 것이 즐거워요.',
      },
    ],
  },
  {
    id: 'q20',
    prompt: '회의에서 다른 사람의 아이디어를 들었을 때 나는?',
    dimension: 'SN',
    options: [
      {
        value: 'S',
        label: '현실적인 실행 방법과 필요한 자원을 먼저 체크해요.',
        helper: '실현 가능성이 핵심이라고 생각해요.',
      },
      {
        value: 'N',
        label: '아이디어가 만들어낼 변화와 파급력을 떠올려요.',
        helper: '확장을 꿈꾸는 과정에서 에너지를 느껴요.',
      },
    ],
  },
  {
    id: 'q21',
    prompt: '하루 일과를 기록할 때 나는?',
    dimension: 'SN',
    options: [
      {
        value: 'S',
        label: '구체적인 시간, 장소, 숫자를 적어요.',
        helper: '세부 정보가 기억을 돕는다고 생각해요.',
      },
      {
        value: 'N',
        label: '느낀 점과 배운 의미를 중심으로 정리해요.',
        helper: '해석과 성찰이 중요하다고 느껴요.',
      },
    ],
  },
  {
    id: 'q22',
    prompt: '새로운 제품을 살 때 나는?',
    dimension: 'SN',
    options: [
      {
        value: 'S',
        label: '스펙과 기능을 비교하며 결정을 내립니다.',
        helper: '객관적인 지표를 신뢰해요.',
      },
      {
        value: 'N',
        label: '제품이 가져다줄 경험과 변화를 상상해요.',
        helper: '감성적인 만족도가 중요해요.',
      },
    ],
  },
  {
    id: 'q23',
    prompt: '새로운 지식을 얻을 때 나는?',
    dimension: 'SN',
    options: [
      {
        value: 'S',
        label: '기존에 알고 있던 사실과 연결해 체계화해요.',
        helper: '차곡차곡 쌓이는 느낌이 안정감을 줘요.',
      },
      {
        value: 'N',
        label: '다른 분야로 확장해 상상력을 발휘해요.',
        helper: '아이디어 간의 연결을 즐겨요.',
      },
    ],
  },
  {
    id: 'q24',
    prompt: '예상치 못한 변수를 만났을 때 나는?',
    dimension: 'SN',
    options: [
      {
        value: 'S',
        label: '현재 상황을 재정비하고 단계별 대응책을 마련해요.',
        helper: '준비된 계획이 있어야 안심돼요.',
      },
      {
        value: 'N',
        label: '변수가 가져올 새로운 기회를 탐색해요.',
        helper: '변화 속에서 혁신이 나온다고 믿어요.',
      },
    ],
  },
  {
    id: 'q25',
    prompt: '실수를 되돌아볼 때 나는?',
    dimension: 'SN',
    options: [
      {
        value: 'S',
        label: '어디서 잘못됐는지 구체적인 과정을 분석해요.',
        helper: '사실을 확인해야 재발을 막을 수 있어요.',
      },
      {
        value: 'N',
        label: '그 경험이 주는 교훈과 변화의 시그널을 찾습니다.',
        helper: '의미를 발견해야 성장한다고 느껴요.',
      },
    ],
  },
  {
    id: 'q26',
    prompt: '미래를 생각할 때 나는?',
    dimension: 'SN',
    options: [
      {
        value: 'S',
        label: '현실적인 목표와 필요한 단계를 계산해요.',
        helper: '확실한 토대가 있을 때 안정을 느껴요.',
      },
      {
        value: 'N',
        label: '장기적인 비전과 가능성을 상상해요.',
        helper: '열린 가능성이 동기 부여가 돼요.',
      },
    ],
  },
  {
    id: 'q27',
    prompt: '친구가 고민을 털어놓았을 때 나는?',
    dimension: 'TF',
    options: [
      {
        value: 'T',
        label: '상황을 분석해 해결책을 함께 찾으려 해요.',
        helper: '논리와 구조로 문제를 바라봐요.',
      },
      {
        value: 'F',
        label: '친구의 감정에 공감하고 감정을 나눠요.',
        helper: '먼저 마음을 어루만지는 것이 중요해요.',
      },
    ],
  },
  {
    id: 'q28',
    prompt: '팀 프로젝트에서 의견 충돌이 생기면 나는?',
    dimension: 'TF',
    options: [
      {
        value: 'T',
        label: '근거를 중심으로 합리적인 결정을 내리려 해요.',
        helper: '객관성과 효율을 우선해요.',
      },
      {
        value: 'F',
        label: '모두가 납득하고 편안한 결론을 찾으려 해요.',
        helper: '팀 분위기와 관계를 중시해요.',
      },
    ],
  },
  {
    id: 'q29',
    prompt: '칭찬을 받을 때 더 기분 좋은 말은 어느 쪽인가요?',
    dimension: 'TF',
    options: [
      {
        value: 'T',
        label: '“네 판단 덕분에 일이 잘 풀렸어.”',
        helper: '논리와 실력으로 인정받을 때 힘이 나요.',
      },
      {
        value: 'F',
        label: '“너 덕분에 모두가 즐거웠어.”',
        helper: '감성과 배려를 알아줄 때 행복해요.',
      },
    ],
  },
  {
    id: 'q30',
    prompt: '중요한 결정을 내려야 할 때 나는?',
    dimension: 'TF',
    options: [
      {
        value: 'T',
        label: '이성적인 장단점을 비교하고 판단해요.',
        helper: '논리적 근거가 있어야 확신이 생겨요.',
      },
      {
        value: 'F',
        label: '관계자들이 어떤 감정을 느낄지 고려해요.',
        helper: '감정적인 영향까지 살펴야 안심돼요.',
      },
    ],
  },
  {
    id: 'q31',
    prompt: '회의에서 피드백을 줄 때 나는?',
    dimension: 'TF',
    options: [
      {
        value: 'T',
        label: '개선해야 할 사항과 근거를 명확히 전달해요.',
        helper: '정확한 피드백이 성장에 도움이 된다고 생각해요.',
      },
      {
        value: 'F',
        label: '상대의 마음을 배려하며 공감 표현을 곁들여요.',
        helper: '관계가 안전해야 피드백이 받아들여진다고 느껴요.',
      },
    ],
  },
  {
    id: 'q32',
    prompt: '기사나 소식을 접할 때 나는?',
    dimension: 'TF',
    options: [
      {
        value: 'T',
        label: '팩트 체크와 통계 자료를 먼저 확인합니다.',
        helper: '객관적인 정보가 전부라고 생각해요.',
      },
      {
        value: 'F',
        label: '사연 속 인물의 감정과 상황에 공감해요.',
        helper: '감정적인 연결이 중요하다고 느껴요.',
      },
    ],
  },
  {
    id: 'q33',
    prompt: '갈등이 발생했을 때 나는?',
    dimension: 'TF',
    options: [
      {
        value: 'T',
        label: '문제를 해결하기 위한 논리적 접근을 제안해요.',
        helper: '원인을 찾아 수정해야 한다고 생각해요.',
      },
      {
        value: 'F',
        label: '먼저 서로의 감정을 이해하고 공감하려 해요.',
        helper: '감정이 정리되어야 해결이 가능하다고 믿어요.',
      },
    ],
  },
  {
    id: 'q34',
    prompt: '다른 사람이 실수했을 때 나는?',
    dimension: 'TF',
    options: [
      {
        value: 'T',
        label: '무엇이 잘못되었는지 분석하고 방법을 제안해요.',
        helper: '개선 방안이 우선이라고 생각해요.',
      },
      {
        value: 'F',
        label: '상대방이 느낄 감정을 먼저 다독여요.',
        helper: '격려와 공감이 필요하다고 느껴요.',
      },
    ],
  },
  {
    id: 'q35',
    prompt: '자신의 목표를 정할 때 나는?',
    dimension: 'TF',
    options: [
      {
        value: 'T',
        label: '숫자와 지표로 명확한 기준을 세워요.',
        helper: '측정 가능한 목표가 동기를 줘요.',
      },
      {
        value: 'F',
        label: '나와 주변 사람에게 어떤 의미가 있는지 생각해요.',
        helper: '가치와 감정의 만족이 중요해요.',
      },
    ],
  },
  {
    id: 'q36',
    prompt: '동료와 의견 차이가 있을 때 나는?',
    dimension: 'TF',
    options: [
      {
        value: 'T',
        label: '논리적인 근거를 제시하며 논의를 이어가요.',
        helper: '사실 기반 대화가 가장 공정하다고 믿어요.',
      },
      {
        value: 'F',
        label: '상대방의 관점에 공감하며 조율점을 찾아요.',
        helper: '감정적인 조화가 우선이라고 느껴요.',
      },
    ],
  },
  {
    id: 'q37',
    prompt: '나 자신을 돌볼 때 나는?',
    dimension: 'TF',
    options: [
      {
        value: 'T',
        label: '생산성과 성장 지표를 체크해 전략을 조정해요.',
        helper: '효율적인 관리가 만족을 줘요.',
      },
      {
        value: 'F',
        label: '감정을 기록하고 휴식이나 위로를 우선해요.',
        helper: '마음의 안정이 가장 중요하다고 느껴요.',
      },
    ],
  },
  {
    id: 'q38',
    prompt: '조직의 규칙을 바라볼 때 나는?',
    dimension: 'TF',
    options: [
      {
        value: 'T',
        label: '규칙이 목적을 달성하는 데 효과적인지 판단해요.',
        helper: '합리성과 효율을 기준 삼아요.',
      },
      {
        value: 'F',
        label: '규칙이 사람들에게 어떤 영향을 주는지 생각해요.',
        helper: '상호 존중이 더 중요하다고 느껴요.',
      },
    ],
  },
  {
    id: 'q39',
    prompt: '여행을 준비할 때 나는 어떻게 움직이나요?',
    dimension: 'JP',
    options: [
      {
        value: 'J',
        label: '세부 일정을 꼼꼼하게 계획하고 체크리스트를 만든다.',
        helper: '예측 가능한 흐름이 있어야 마음이 편안해요.',
      },
      {
        value: 'P',
        label: '대략적인 방향만 정하고 상황에 따라 결정해요.',
        helper: '즉흥적인 선택의 자유를 즐겨요.',
      },
    ],
  },
  {
    id: 'q40',
    prompt: '마감이 있는 일을 할 때 나는?',
    dimension: 'JP',
    options: [
      {
        value: 'J',
        label: '미리 계획해 차근차근 끝내요.',
        helper: '여유 있게 마무리해야 안심돼요.',
      },
      {
        value: 'P',
        label: '마감 직전에 몰입해서 한 번에 끝내는 편이에요.',
        helper: '압박감 속에서 집중력이 올라요.',
      },
    ],
  },
  {
    id: 'q41',
    prompt: '내게 주어진 선택지가 많을 때 나는?',
    dimension: 'JP',
    options: [
      {
        value: 'J',
        label: '빠르게 기준을 세우고 결정을 내려요.',
        helper: '확실한 방향성을 선호해요.',
      },
      {
        value: 'P',
        label: '가능성을 열어두고 더 알아보길 원해요.',
        helper: '유연하게 흐름을 따라가요.',
      },
    ],
  },
  {
    id: 'q42',
    prompt: '업무 공간을 관리할 때 나는?',
    dimension: 'JP',
    options: [
      {
        value: 'J',
        label: '정리된 책상과 체계가 있어야 집중돼요.',
        helper: '정돈된 환경이 마음을 안정시켜요.',
      },
      {
        value: 'P',
        label: '필요할 때 사용하는 물건이 눈에 보여야 편해요.',
        helper: '자유로운 배치가 아이디어를 자극해요.',
      },
    ],
  },
  {
    id: 'q43',
    prompt: '하루 일정을 기록할 때 나는?',
    dimension: 'JP',
    options: [
      {
        value: 'J',
        label: '시간대별로 할 일을 정리해 체크합니다.',
        helper: '계획대로 움직여야 성취감을 느껴요.',
      },
      {
        value: 'P',
        label: '우선순위를 느끼는 대로 정하고 탄력적으로 움직여요.',
        helper: '유연한 흐름에서 창의성이 나온다고 믿어요.',
      },
    ],
  },
  {
    id: 'q44',
    prompt: '장기 프로젝트를 진행할 때 나는?',
    dimension: 'JP',
    options: [
      {
        value: 'J',
        label: '중간 목표와 마일스톤을 설정해 추적해요.',
        helper: '확실한 구조가 성공을 보장한다고 생각해요.',
      },
      {
        value: 'P',
        label: '상황에 맞춰 전략을 계속 조정하며 나아가요.',
        helper: '유연함이 더 좋은 결과를 만든다고 믿어요.',
      },
    ],
  },
  {
    id: 'q45',
    prompt: '약속 시간에 맞추는 방식은?',
    dimension: 'JP',
    options: [
      {
        value: 'J',
        label: '미리 준비해서 여유 있게 도착하는 편이에요.',
        helper: '시간 준수가 신뢰의 기본이라고 생각해요.',
      },
      {
        value: 'P',
        label: '상황에 따라 조금 변동이 있지만 융통성 있게 대처해요.',
        helper: '정확한 시간보다 흐름이 더 중요해요.',
      },
    ],
  },
  {
    id: 'q46',
    prompt: '아이디어 스케치를 할 때 나는?',
    dimension: 'JP',
    options: [
      {
        value: 'J',
        label: '초안부터 구조화해 완성형에 가깝게 만들어요.',
        helper: '뼈대를 잡아야 집중이 돼요.',
      },
      {
        value: 'P',
        label: '떠오르는 생각을 자유롭게 적고 후에 정리해요.',
        helper: '자유로운 발상이 창의성을 키워요.',
      },
    ],
  },
  {
    id: 'q47',
    prompt: '예상치 못한 기회가 찾아올 때 나는?',
    dimension: 'JP',
    options: [
      {
        value: 'J',
        label: '현재 계획과의 충돌 여부를 먼저 확인해요.',
        helper: '안정된 계획을 우선시해요.',
      },
      {
        value: 'P',
        label: '흥미가 생기면 일단 시도해 보며 조정합니다.',
        helper: '새로운 흐름이 삶을 풍부하게 만든다고 느껴요.',
      },
    ],
  },
  {
    id: 'q48',
    prompt: '휴식을 취할 때 나는?',
    dimension: 'JP',
    options: [
      {
        value: 'J',
        label: '정해진 루틴 속에서 차분히 쉬어요.',
        helper: '예측 가능한 휴식이 마음을 안정시켜요.',
      },
      {
        value: 'P',
        label: '기분이 이끄는 대로 새로운 휴식법을 시도해요.',
        helper: '즉흥적인 즐거움이 에너지를 채워요.',
      },
    ],
  },
  {
    id: 'q49',
    prompt: '정보를 정리할 때 나는?',
    dimension: 'JP',
    options: [
      {
        value: 'J',
        label: '카테고리를 나누고 체계적으로 분류해요.',
        helper: '정돈된 구조가 학습을 도와요.',
      },
      {
        value: 'P',
        label: '필요할 때 다시 찾을 수 있도록 자유롭게 메모해요.',
        helper: '유동적인 기록이 더 창의적이라고 느껴요.',
      },
    ],
  },
  {
    id: 'q50',
    prompt: '프로젝트가 끝난 뒤 나는?',
    dimension: 'JP',
    options: [
      {
        value: 'J',
        label: '성과를 정리하고 다음 계획을 빠르게 준비해요.',
        helper: '마무리와 정리가 있어야 비로소 완료라고 생각해요.',
      },
      {
        value: 'P',
        label: '잠시 쉬면서 새로운 영감을 기다려요.',
        helper: '여유 속에서 다음 아이디어가 떠오른다고 느껴요.',
      },
    ],
  },
];

const QUESTIONS_PER_PAGE = 10;
const TOTAL_PAGES = Math.ceil(QUESTIONS.length / QUESTIONS_PER_PAGE);

const TRAIT_PAIRS: Record<MBTIDimension, [string, string]> = {
  EI: ['E', 'I'],
  SN: ['S', 'N'],
  TF: ['T', 'F'],
  JP: ['J', 'P'],
};

const TRAIT_LABEL: Record<string, string> = {
  E: '외향 (Extraversion)',
  I: '내향 (Introversion)',
  S: '감각 (Sensing)',
  N: '직관 (Intuition)',
  T: '사고 (Thinking)',
  F: '감정 (Feeling)',
  J: '판단 (Judging)',
  P: '인식 (Perceiving)',
};

const DIMENSION_DESCRIPTIONS: Record<MBTIDimension, { primary: string; secondary: string; primaryDesc: string; secondaryDesc: string }> = {
  EI: {
    primary: 'E',
    secondary: 'I',
    primaryDesc: '외향형은 사람들과 함께 있을 때 에너지를 얻고, 생각을 말로 표현하며, 다양한 활동과 상호작용을 즐깁니다.',
    secondaryDesc: '내향형은 혼자 있을 때 에너지를 충전하고, 깊이 있는 사고를 하며, 소수의 가까운 사람들과 깊은 관계를 선호합니다.',
  },
  SN: {
    primary: 'S',
    secondary: 'N',
    primaryDesc: '감각형은 현재의 사실과 경험에 집중하며, 구체적이고 실용적인 정보를 선호하고, 검증된 방법을 신뢰합니다.',
    secondaryDesc: '직관형은 가능성과 패턴에 관심이 많으며, 추상적이고 이론적인 아이디어를 좋아하고, 새로운 방법을 탐색합니다.',
  },
  TF: {
    primary: 'T',
    secondary: 'F',
    primaryDesc: '사고형은 논리와 객관성을 중시하며, 일관성 있는 기준으로 판단하고, 공정함과 효율성을 추구합니다.',
    secondaryDesc: '감정형은 가치와 조화를 중시하며, 사람들의 감정을 고려하여 판단하고, 공감과 이해를 추구합니다.',
  },
  JP: {
    primary: 'J',
    secondary: 'P',
    primaryDesc: '판단형은 계획과 조직을 선호하며, 결정을 빠르게 내리고, 구조화된 환경에서 편안함을 느낍니다.',
    secondaryDesc: '인식형은 유연성과 자유를 선호하며, 선택지를 열어두고, 변화하는 상황에 적응하는 것을 즐깁니다.',
  },
};

const TYPE_DESCRIPTIONS: Record<
  string,
  {
    title: string;
    summary: string;
    narrative: string;
    strengths: string[];
    weaknesses: string[];
    growth: string[];
    spotlight: string;
    careers: string[];
    relationships: string[];
    romance: string;
    detailedTraits: string[];
    recommendedActivities: string[];
  }
> = {
  ISTJ: {
    title: '신중한 조정자',
    summary:
      '책임감과 성실함으로 꾸준히 목표를 완수하는 유형이에요. 명확한 기준과 절차가 있을 때 가장 빛을 발합니다.',
    narrative:
      '일상의 질서를 지키며 안정감을 만드는 당신은 팀에 든든한 기반을 제공합니다. 현실적인 데이터를 토대로 계획을 세우고, 약속을 지키는 모습으로 신뢰를 얻습니다.',
    strengths: [
      '체계적인 계획 수립',
      '꾸준한 실행력과 책임감',
      '세부 사항을 놓치지 않는 집중력',
      '위기 상황에서도 흔들리지 않는 침착함',
    ],
    weaknesses: [
      '변화에 대한 저항이 클 수 있음',
      '감정 표현이 서툴러 관계에서 오해가 생길 수 있음',
      '과도한 완벽주의로 스트레스가 쌓일 수 있음',
      '새로운 아이디어나 실험을 꺼리는 경향',
    ],
    growth: [
      '새로운 시도를 유연하게 받아들이기',
      '감정 표현과 소통을 연습하기',
      '과도한 완벽주의를 내려놓기',
      '휴식과 재충전 시간을 의식적으로 확보하기',
    ],
    spotlight:
      '정확한 데이터와 절차가 필요한 프로젝트에서 안정감을 선사합니다. 시스템을 정비하고 유지하는 역할에서 팀의 든든한 버팀목이 돼요.',
    careers: ['재무 관리자', '품질 관리 전문가', '공공기관 행정 담당자'],
    relationships: [
      '신뢰를 바탕으로 한 깊고 안정적인 관계를 선호',
      '약속을 지키고 책임감 있게 행동하는 모습으로 신뢰를 얻음',
      '감정 표현이 서툴러도 행동으로 보여주는 스타일',
      '가족과 친구들에게 실질적인 도움을 주는 것을 좋아함',
    ],
    romance: '진지하고 책임감 있는 연애를 추구합니다. 감정 표현은 서툴러도 행동으로 보여주며, 장기적인 관계를 중시해요. 안정적이고 신뢰할 수 있는 파트너가 되려고 노력합니다.',
    detailedTraits: [
      '현실적이고 실용적인 접근을 선호',
      '전통과 규칙을 중시하며 질서를 좋아함',
      '감정보다 논리와 사실에 기반해 판단',
      '계획을 세우고 체계적으로 실행하는 것을 좋아함',
      '변화보다는 안정을 추구',
    ],
    recommendedActivities: [
      '정리 정돈과 계획 세우기',
      '독서와 학습을 통한 자기계발',
      '규칙적인 운동과 건강 관리',
      '취미 활동을 통한 여가 시간 확보',
      '신뢰할 수 있는 사람들과의 깊은 대화',
    ],
  },
  ISFJ: {
    title: '다정한 수호자',
    summary:
      '배려심이 깊고 사람들을 세심하게 챙기는 따뜻한 유형이에요. 안정적인 환경을 만들기 위해 헌신합니다.',
    narrative:
      '주변 사람들의 필요를 빠르게 알아채고 실질적인 도움을 주는 능력이 뛰어나요. 조용하지만 꾸준한 지원으로 팀과 공동체에 신뢰를 쌓습니다.',
    strengths: [
      '섬세한 관찰력으로 상황 파악',
      '헌신적인 지원과 서비스 정신',
      '장기적으로 안정감을 구축하는 힘',
      '기록과 정리 능력',
    ],
    growth: [
      '자신의 욕구와 한계도 살펴보기',
      '빠른 변화에 대한 적응력 기르기',
      '감정 피로를 해소하는 방법 찾기',
      '필요할 때 솔직하게 의견 드러내기',
    ],
    spotlight:
      '팀의 안정과 신뢰를 구축해야 하는 장면에서 진가를 발휘합니다. 돌봄과 지원이 필요한 조직이라면 어디에서든 귀중한 존재입니다.',
    careers: ['교육 복지사', '의료 코디네이터', 'HR 운영 담당자'],
    weaknesses: [
      '자신의 필요를 뒤로 미루는 경향',
      '변화에 대한 저항이 있을 수 있음',
      '갈등 상황을 회피하려는 경향',
      '과도한 책임감으로 스트레스가 쌓일 수 있음',
    ],
    relationships: [
      '배려심 깊고 헌신적인 관계를 선호',
      '가족과 친구들을 세심하게 챙기는 스타일',
      '조용하지만 꾸준한 지원으로 신뢰를 쌓음',
      '감정 표현보다 행동으로 보여주는 편',
    ],
    romance: '진지하고 안정적인 연애를 추구합니다. 파트너를 세심하게 챙기고 배려하며, 장기적인 관계를 중시해요. 감정 표현은 서툴러도 행동으로 사랑을 보여주는 스타일입니다.',
    detailedTraits: [
      '배려심이 깊고 섬세한 관찰력',
      '안정과 질서를 중시하는 성향',
      '전통과 규칙을 존중하는 편',
      '현실적이고 실용적인 접근',
      '감정보다 사실과 경험에 기반해 판단',
    ],
    recommendedActivities: [
      '가족이나 친구들과의 시간 보내기',
      '요리나 수공예 같은 창작 활동',
      '정리 정돈과 계획 세우기',
      '독서와 학습을 통한 자기계발',
      '자연 속에서의 휴식과 산책',
    ],
  },
  INFJ: {
    title: '통찰하는 안내자',
    summary:
      '사람과 세상의 가능성을 보고 의미 있는 변화를 만들어가요. 깊은 공감과 통찰력으로 방향을 제시합니다.',
    narrative:
      '내면의 가치에 충실하며 장기적인 비전을 그리는 리더입니다. 섬세한 감수성과 전략적 사고를 결합해 사람들을 성장으로 이끕니다.',
    strengths: [
      '깊이 있는 공감 능력',
      '미래 지향적 비전 제시',
      '가치 중심의 의사결정',
      '복잡한 관계를 조율하는 통찰력',
    ],
    growth: [
      '현실적인 자원과 속도를 함께 고려하기',
      '스스로에게 가혹한 기준 낮추기',
      '과도한 이상화 줄이기',
      '충분한 휴식과 경계 설정하기',
    ],
    spotlight:
      '장기적인 방향을 제시하고 사람들의 잠재력을 끌어올리는 역할에서 강점을 발휘합니다. 조직 문화와 코칭, 기획 분야에서 영향력을 행사해요.',
    careers: ['조직 문화 코치', '사회혁신 기획자', '심리 상담가'],
    weaknesses: [
      '과도한 이상화로 현실과 괴리가 생길 수 있음',
      '자신에게 가혹한 기준을 적용',
      '감정 소모가 크고 경계 설정이 어려움',
      '완벽주의로 인한 스트레스',
    ],
    relationships: [
      '깊고 의미 있는 관계를 추구',
      '사람들의 잠재력을 발견하고 성장시키는 것을 좋아함',
      '진정성 있는 대화와 연결을 중시',
      '소수의 깊은 관계를 선호',
    ],
    romance: '진정성 있고 깊은 연애를 추구합니다. 파트너의 성장을 돕고 함께 발전하는 관계를 원해요. 감정적 연결과 의미 있는 대화를 중시하며, 이상적인 사랑을 꿈꾸는 편입니다.',
    detailedTraits: [
      '깊은 통찰력과 직관력',
      '가치와 의미를 중시하는 성향',
      '미래 지향적이고 비전을 그리는 능력',
      '공감 능력이 뛰어남',
      '전략적 사고와 감수성을 결합',
    ],
    recommendedActivities: [
      '독서와 글쓰기를 통한 자기 탐구',
      '명상이나 요가 같은 내면 활동',
      '예술 감상이나 창작 활동',
      '의미 있는 대화와 토론',
      '사회적 가치를 실현하는 활동',
    ],
  },
  INTJ: {
    title: '전략적 설계자',
    summary:
      '논리와 통찰을 바탕으로 거대한 그림을 설계하는 유형이에요. 비전을 현실로 만드는 구조를 짜는 데 탁월합니다.',
    narrative:
      '독립적인 사고와 높은 기준으로 새로운 시스템을 설계합니다. 데이터를 분석하고 가능성을 진단해 조직이 나아갈 길을 명확히 그려요.',
    strengths: [
      '체계적인 전략 수립 능력',
      '복잡한 문제를 구조화하는 힘',
      '장기적인 시야와 통찰',
      '지속적인 자기 개발 의지',
    ],
    growth: [
      '감정적 신호에도 귀 기울이기',
      '팀원들의 속도와 스타일 존중하기',
      '완급 조절과 휴식 연습하기',
      '아이디어를 공유하며 공동 개발하기',
    ],
    spotlight:
      '혁신과 효율을 동시에 추구해야 하는 프로젝트에서 돌파구를 만듭니다. 조직의 방향성을 재설계할 때 꼭 필요한 전략가예요.',
    careers: ['전략 기획가', '데이터 컨설턴트', '테크 벤처 창업가'],
    weaknesses: [
      '감정 표현과 공감이 부족할 수 있음',
      '타인의 속도와 스타일을 이해하기 어려울 수 있음',
      '과도한 완벽주의',
      '사회적 상호작용을 피하는 경향',
    ],
    relationships: [
      '소수의 깊고 지적인 관계를 선호',
      '독립성을 중시하며 개인 공간이 필요',
      '논리적이고 합리적인 대화를 좋아함',
      '감정 표현보다 아이디어 공유를 선호',
    ],
    romance: '독립적이고 지적인 연애를 추구합니다. 파트너와 깊은 대화와 아이디어 공유를 즐기며, 서로의 공간을 존중하는 관계를 원해요. 감정 표현은 서툴러도 행동으로 보여주는 편입니다.',
    detailedTraits: [
      '논리적이고 체계적인 사고',
      '장기적인 비전과 전략 수립 능력',
      '독립적이고 자율적인 성향',
      '높은 기준과 완벽주의',
      '지식과 학습에 대한 열정',
    ],
    recommendedActivities: [
      '독서와 연구를 통한 학습',
      '전략 게임이나 퍼즐',
      '프로그래밍이나 기술 프로젝트',
      '혼자만의 시간과 공간',
      '복잡한 문제 해결과 분석',
    ],
  },
  ISTP: {
    title: '유연한 해결사',
    summary:
      '즉흥적이고 실용적인 방식으로 문제를 해결하는 유형이에요. 상황 판단과 손재주가 뛰어납니다.',
    narrative:
      '냉철한 분석력과 탐구심으로 다양한 도전을 즐깁니다. 위기 상황에서도 침착하게 원인을 파악하고 직접 해결책을 찾습니다.',
    strengths: [
      '현장 대응 능력',
      '문제 구조를 빠르게 파악하는 분석력',
      '기술적 숙련도와 손재주',
      '도전을 즐기는 호기심',
    ],
    growth: [
      '감정과 생각을 꾸준히 공유하기',
      '장기 계획을 세워 지속성 확보하기',
      '관심 없는 일도 일정하게 관리하기',
      '타인의 속도를 존중하며 협력하기',
    ],
    spotlight:
      '변수가 많은 프로젝트나 긴급 대응이 필요한 업무에서 해결사 역할을 맡습니다. 실험과 테스트가 필요한 환경에서 높은 성과를 내요.',
    careers: ['제품 프로토타이퍼', '현장 기술 엔지니어', '디지털 포렌식 전문가'],
    weaknesses: [
      '감정 표현과 소통이 부족할 수 있음',
      '장기 계획을 세우는 것을 어려워함',
      '반복되는 일상 업무에 지루함을 느낌',
      '타인의 감정을 이해하기 어려울 수 있음',
    ],
    relationships: [
      '독립적이고 자유로운 관계를 선호',
      '깊은 대화보다 함께 활동하는 것을 좋아함',
      '개인 공간과 시간을 중시',
      '감정 표현보다 행동으로 보여주는 편',
    ],
    romance: '자유롭고 독립적인 연애를 선호합니다. 파트너와 함께 새로운 경험을 즐기며, 서로의 공간을 존중하는 관계를 원해요. 감정 표현은 서툴러도 행동으로 관심을 보여줍니다.',
    detailedTraits: [
      '실용적이고 현실적인 접근',
      '즉흥적이고 유연한 성향',
      '기술과 손재주에 뛰어남',
      '독립적이고 자율적인 성향',
      '논리적 분석과 문제 해결 능력',
    ],
    recommendedActivities: [
      '기술 프로젝트나 DIY 활동',
      '스포츠나 모험 활동',
      '게임이나 퍼즐',
      '혼자만의 시간과 공간',
      '새로운 도구나 기술 배우기',
    ],
  },
  ISFP: {
    title: '감성적인 창작자',
    summary:
      '자연스럽게 흘러가는 삶 속에서 아름다움과 의미를 찾는 유형이에요. 섬세한 감각으로 주변을 따뜻하게 물들입니다.',
    narrative:
      '즉흥성과 예술적 감수성으로 자유롭게 표현하는 것을 즐깁니다. 조용한 존재감이지만 사람들을 편안하게 만드는 에너지를 지녔어요.',
    strengths: [
      '섬세한 미적 감각',
      '온화한 배려와 공감',
      '상황에 맞추는 유연성',
      '지금 이 순간을 즐기는 몰입력',
    ],
    growth: [
      '자신의 의견을 적극적으로 표현하기',
      '갈등을 회피하기보다 조율 연습하기',
      '장기 목표를 세우고 지속하기',
      '감정 소모를 줄이는 자기 보호 전략 세우기',
    ],
    spotlight:
      '감성적인 가치를 전달해야 하는 디자인·예술 분야에서 빛이 납니다. 사람들의 경험을 풍성하게 하는 역할에서 영향력을 발휘해요.',
    careers: ['브랜드 디자이너', '콘텐츠 크리에이터', '아트 테라피스트'],
    weaknesses: [
      '갈등 상황을 회피하려는 경향',
      '자신의 의견을 표현하기 어려워함',
      '장기 계획을 세우는 것을 어려워함',
      '비판에 민감하게 반응할 수 있음',
    ],
    relationships: [
      '따뜻하고 배려심 있는 관계를 선호',
      '조용하지만 깊은 연결을 중시',
      '감정 표현보다 행동으로 보여주는 편',
      '소수의 가까운 사람들과 깊은 관계',
    ],
    romance: '따뜻하고 로맨틱한 연애를 추구합니다. 파트너를 세심하게 배려하며, 함께 아름다운 경험을 만들어가는 것을 좋아해요. 감정 표현은 서툴러도 행동으로 사랑을 보여줍니다.',
    detailedTraits: [
      '섬세한 미적 감각과 예술적 감수성',
      '온화하고 배려심 있는 성향',
      '현재 순간을 즐기는 능력',
      '유연하고 적응력이 뛰어남',
      '감정과 가치를 중시',
    ],
    recommendedActivities: [
      '예술이나 디자인 활동',
      '자연 속에서의 휴식',
      '음악 감상이나 연주',
      '요리나 수공예',
      '가까운 사람들과의 시간',
    ],
  },
  INFP: {
    title: '이상적인 스토리텔러',
    summary:
      '가치와 의미를 바탕으로 사람들의 마음을 울리는 유형이에요. 자신만의 철학과 상상력으로 세상을 해석합니다.',
    narrative:
      '깊은 내면 세계를 탐색하며 진정성 있는 메시지를 전하고 싶어 합니다. 다른 사람의 아픔에 공감하며 희망을 북돋우는 이야기꾼이에요.',
    strengths: [
      '창의적인 아이디어 발굴',
      '깊은 공감 능력',
      '가치 중심 의사결정',
      '언어나 예술로 감정을 표현하는 능력',
    ],
    growth: [
      '아이디어를 구체적인 실행 계획과 연결하기',
      '피드백을 열린 마음으로 받아들이기',
      '감정 기복을 관리할 루틴 만들기',
      '현실적인 자원과 기한 고려하기',
    ],
    spotlight:
      '콘텐츠 기획, 상담, 예술 등 사람과 이야기 중심 역할에 어울립니다. 사람들에게 영감을 주고 변화를 꿈꾸게 만드는 데 탁월해요.',
    careers: ['스토리텔링 작가', '브랜드 에디터', '청소년 상담사'],
    weaknesses: [
      '비판에 민감하게 반응',
      '현실적인 제약을 간과할 수 있음',
      '감정 기복이 클 수 있음',
      '과도한 이상화',
    ],
    relationships: [
      '진정성 있고 깊은 관계를 추구',
      '가치와 의미를 공유하는 사람들과 연결',
      '감정적 연결과 공감을 중시',
      '소수의 깊은 관계를 선호',
    ],
    romance: '이상적이고 로맨틱한 연애를 꿈꿉니다. 파트너와 깊은 감정적 연결과 의미 있는 대화를 즐기며, 함께 성장하고 발전하는 관계를 원해요. 진정성 있는 사랑을 추구합니다.',
    detailedTraits: [
      '창의적이고 상상력이 풍부함',
      '가치와 의미를 중시하는 성향',
      '깊은 공감 능력',
      '이상주의적이고 미래 지향적',
      '언어와 예술로 표현하는 능력',
    ],
    recommendedActivities: [
      '글쓰기나 창작 활동',
      '독서와 예술 감상',
      '명상이나 내면 탐구',
      '의미 있는 대화와 토론',
      '사회적 가치를 실현하는 활동',
    ],
  },
  INTP: {
    title: '지적 탐구자',
    summary:
      '지식을 탐색하고 논리적인 구조를 세우는 데 탁월한 유형이에요. 복잡한 문제를 깊이 있게 파고듭니다.',
    narrative:
      '호기심이 많은 사색가로, 새로운 이론을 만들고 검증하는 과정에서 보람을 느껴요. 독립적으로 탐구하지만, 통찰을 나누며 지적 네트워크를 확장하기도 합니다.',
    strengths: [
      '깊이 있는 분석력',
      '이론화와 모델링 능력',
      '논리적인 의사소통',
      '새로운 지식을 빠르게 흡수하는 메타인지',
    ],
    growth: [
      '아이디어를 실행으로 이어질 구조 설계하기',
      '타인과 소통 빈도 늘리기',
      '완벽한 답을 기다리기보다 현실과 타협하기',
      '시간 관리와 우선순위 명확히 하기',
    ],
    spotlight:
      '연구·분석, 시스템 설계 같은 지적 도전 분야에서 뛰어난 공헌을 합니다. 복잡한 문제를 종합적으로 이해해야 할 때 빛나요.',
    careers: ['데이터 과학자', 'AI 연구원', '지식 콘텐츠 설계자'],
    weaknesses: [
      '감정 표현과 공감이 부족할 수 있음',
      '실행보다 이론에 집중하는 경향',
      '사회적 상호작용을 피하는 경향',
      '완벽한 답을 기다리며 결정을 미룸',
    ],
    relationships: [
      '지적이고 독립적인 관계를 선호',
      '아이디어와 이론을 공유하는 것을 좋아함',
      '개인 공간과 시간을 중시',
      '감정 표현보다 논리적 대화를 선호',
    ],
    romance: '지적이고 독립적인 연애를 선호합니다. 파트너와 깊은 대화와 아이디어 공유를 즐기며, 서로의 공간을 존중하는 관계를 원해요. 감정 표현은 서툴러도 지적 호기심으로 연결합니다.',
    detailedTraits: [
      '논리적이고 분석적인 사고',
      '이론과 개념에 대한 열정',
      '독립적이고 자율적인 성향',
      '호기심이 많고 탐구 정신이 강함',
      '완벽주의적 성향',
    ],
    recommendedActivities: [
      '연구와 학습',
      '프로그래밍이나 기술 프로젝트',
      '전략 게임이나 퍼즐',
      '혼자만의 시간과 공간',
      '복잡한 문제 해결과 분석',
    ],
  },
  ESTP: {
    title: '과감한 실천가',
    summary:
      '순간을 즐기고 빠르게 행동으로 옮기는 에너지가 넘쳐요. 위기 대응과 현장 실행에 강한 자신감을 보여줍니다.',
    narrative:
      '새로운 자극과 도전을 즐기며, 문제를 직접 부딪혀 해결합니다. 뛰어난 관찰력과 현실 감각으로 즉시 판단하고 움직여요.',
    strengths: [
      '현장 대응력과 순발력',
      '결단력 있는 실행',
      '사교적인 네트워킹 능력',
      '위험을 감지하고 기회로 바꾸는 감각',
    ],
    growth: [
      '장기적인 결과와 리스크도 고려하기',
      '감정적 여파와 관계를 살피기',
      '일관된 루틴과 셀프 케어 구축하기',
      '과도한 즉흥성을 조절하기',
    ],
    spotlight:
      '세일즈, 이벤트, 위기 대응 등 즉각적인 실행이 필요한 자리에서 강점을 발휘합니다. 상황을 반전시키는 문제 해결사로 통합니다.',
    careers: ['영업 전략가', '스포츠 마케팅 디렉터', '이벤트 프로듀서'],
    weaknesses: [
      '장기 계획을 세우는 것을 어려워함',
      '감정적 여파를 간과할 수 있음',
      '반복되는 일상 업무에 지루함을 느낌',
      '충동적인 결정을 내릴 수 있음',
    ],
    relationships: [
      '활발하고 역동적인 관계를 선호',
      '함께 활동하고 경험을 공유하는 것을 좋아함',
      '즉흥적이고 자유로운 스타일',
      '감정 표현보다 행동으로 보여주는 편',
    ],
    romance: '활발하고 자유로운 연애를 선호합니다. 파트너와 함께 새로운 경험과 모험을 즐기며, 즉흥적이고 스릴 있는 관계를 원해요. 감정 표현은 서툴러도 행동으로 관심을 보여줍니다.',
    detailedTraits: [
      '실용적이고 현실적인 접근',
      '즉흥적이고 유연한 성향',
      '현장 감각과 순발력',
      '사교적이고 활발한 성격',
      '위험을 감수하고 도전하는 용기',
    ],
    recommendedActivities: [
      '스포츠나 모험 활동',
      '사교 모임이나 파티',
      '즉흥적인 여행이나 탐험',
      '경쟁이나 도전 활동',
      '새로운 경험과 자극',
    ],
  },
  ESFP: {
    title: '따뜻한 무대체질',
    summary:
      '사람들과 함께 순간의 즐거움을 만들어가는 유형이에요. 밝은 에너지로 분위기를 주도합니다.',
    narrative:
      '주변 사람의 감정을 세심히 읽고 모두가 즐거운 시간을 보내도록 힘씁니다. 즉흥적이지만 따뜻한 마음으로 팀을 활기차게 만들어요.',
    strengths: [
      '긍정적인 분위기 메이커',
      '탁월한 공감력과 대인 관계',
      '현장 감각을 살린 실행력',
      '새로운 경험을 즐기는 호기심',
    ],
    growth: [
      '재정 및 시간 관리 습관 강화하기',
      '피드백을 체계적으로 정리하기',
      '감정 기복을 완화할 루틴 만들기',
      '장기 목표를 구체화하기',
    ],
    spotlight:
      '공연, 서비스, 교육 등 사람과 상호작용이 많은 역할에 어울립니다. 분위기를 살리고 고객 경험을 높이는 전문가예요.',
    careers: ['퍼포먼스 아티스트', '고객 경험 매니저', '라이프스타일 콘텐츠 호스트'],
    weaknesses: [
      '장기 계획을 세우는 것을 어려워함',
      '비판에 민감하게 반응할 수 있음',
      '감정 기복이 클 수 있음',
      '반복되는 일상 업무에 지루함을 느낌',
    ],
    relationships: [
      '밝고 활발한 관계를 선호',
      '사람들과 함께 즐거운 시간을 보내는 것을 좋아함',
      '감정 표현이 풍부하고 따뜻함',
      '즉흥적이고 자유로운 스타일',
    ],
    romance: '밝고 로맨틱한 연애를 추구합니다. 파트너와 함께 즐거운 경험을 만들고, 감정을 풍부하게 표현하며, 즉흥적이고 재미있는 관계를 원해요. 따뜻하고 열정적인 사랑을 선호합니다.',
    detailedTraits: [
      '밝고 긍정적인 에너지',
      '공감 능력이 뛰어남',
      '현재 순간을 즐기는 능력',
      '사교적이고 활발한 성격',
      '예술적 감수성',
    ],
    recommendedActivities: [
      '공연이나 예술 활동',
      '사교 모임이나 파티',
      '여행이나 새로운 경험',
      '음악이나 춤',
      '사람들과의 상호작용',
    ],
  },
  ENFP: {
    title: '영감을 주는 모험가',
    summary:
      '열정적인 에너지로 새로운 가능성을 찾아 나서는 유형이에요. 변화 속에서 기회를 발견합니다.',
    narrative:
      '풍부한 아이디어와 인간적인 매력으로 사람들을 끌어당깁니다. 다양한 관점을 받아들이며 혁신을 촉진하는 촉매제 역할을 합니다.',
    strengths: [
      '풍부한 아이디어와 상상력',
      '사람을 연결하는 커뮤니케이션',
      '변화에 대한 높은 적응력',
      '잠재력을 끌어내는 격려 능력',
    ],
    growth: [
      '아이디어를 끝까지 완성하는 습관 들이기',
      '우선순위를 정해 집중하기',
      '감정 기복을 다루는 자기 관리',
      '과도한 약속을 줄이고 시간 관리 강화하기',
    ],
    spotlight:
      '브랜딩, 콘텐츠, 스타트업 등 창의적인 팀에서 활약합니다. 변화의 불씨를 지피고 조직에 활력을 불어넣어요.',
    careers: ['브랜드 전략가', '스타트업 PM', '커뮤니티 빌더'],
    weaknesses: [
      '아이디어를 끝까지 완성하기 어려움',
      '감정 기복이 클 수 있음',
      '과도한 약속으로 스트레스가 쌓임',
      '현실적인 제약을 간과할 수 있음',
    ],
    relationships: [
      '열정적이고 활발한 관계를 선호',
      '사람들을 연결하고 영감을 주는 것을 좋아함',
      '감정 표현이 풍부하고 따뜻함',
      '다양한 사람들과의 네트워크',
    ],
    romance: '열정적이고 로맨틱한 연애를 추구합니다. 파트너와 함께 새로운 경험을 만들고, 깊은 감정적 연결과 의미 있는 대화를 즐기며, 함께 성장하고 발전하는 관계를 원해요.',
    detailedTraits: [
      '창의적이고 상상력이 풍부함',
      '열정적이고 에너지가 넘침',
      '사람을 연결하는 능력',
      '변화와 혁신을 추구',
      '공감 능력이 뛰어남',
    ],
    recommendedActivities: [
      '창작 활동이나 프로젝트',
      '사교 모임이나 네트워킹',
      '여행이나 새로운 경험',
      '의미 있는 대화와 토론',
      '사회적 가치를 실현하는 활동',
    ],
  },
  ENTP: {
    title: '도전적인 발명가',
    summary:
      '틀을 깨는 질문과 혁신적인 아이디어로 변화를 이끄는 유형이에요. 토론과 실험을 즐기며 새로운 모델을 만듭니다.',
    narrative:
      '논리와 유머를 겸비한 도전 정신으로 다양한 가능성을 시험합니다. 문제의 본질을 파고들어 독창적인 해결책을 제시해요.',
    strengths: [
      '전략적인 토론 능력',
      '혁신 아이디어 생성력',
      '복잡한 문제를 빠르게 파악하는 통찰',
      '위험을 감수하는 과감함',
    ],
    growth: [
      '결정을 미루지 않고 실행하기',
      '상대의 감정과 속도를 배려하기',
      '아이디어 실행 계획을 구체화하기',
      '반복되는 작업도 꾸준히 관리하기',
    ],
    spotlight:
      '새로운 비즈니스 모델 설계나 혁신 프로젝트에 최적화돼 있어요. 도전적인 환경에서 변화를 이끄는 촉매제가 됩니다.',
    careers: ['신사업 기획자', '벤처 캐피털리스트', '혁신 컨설턴트'],
    weaknesses: [
      '결정을 미루고 실행을 지연시킬 수 있음',
      '타인의 감정을 간과할 수 있음',
      '반복되는 일상 업무에 지루함을 느낌',
      '과도한 도전으로 리스크가 클 수 있음',
    ],
    relationships: [
      '지적이고 활발한 관계를 선호',
      '토론과 아이디어 공유를 즐김',
      '독립적이지만 사교적인 스타일',
      '감정 표현보다 논리적 대화를 선호',
    ],
    romance: '지적이고 역동적인 연애를 선호합니다. 파트너와 깊은 대화와 토론을 즐기며, 함께 새로운 경험과 도전을 추구하는 관계를 원해요. 독립성을 존중하면서도 활발한 상호작용을 선호합니다.',
    detailedTraits: [
      '논리적이고 전략적인 사고',
      '혁신과 변화를 추구',
      '토론과 도전을 즐김',
      '독립적이지만 사교적인 성향',
      '아이디어 생성력이 뛰어남',
    ],
    recommendedActivities: [
      '토론이나 논쟁',
      '혁신 프로젝트나 스타트업',
      '전략 게임이나 퍼즐',
      '새로운 경험과 도전',
      '지적 네트워킹',
    ],
  },
  ESTJ: {
    title: '결단력 있는 지휘관',
    summary:
      '효율과 규칙을 중시하며 목표를 향해 팀을 이끄는 유형이에요. 명확한 기준으로 시스템을 정비합니다.',
    narrative:
      '현실 감각이 뛰어나 생산성과 품질을 동시에 챙깁니다. 조직의 구조를 정비하고 사람들을 한 방향으로 모으는 능력이 탁월해요.',
    strengths: [
      '명확한 방향 제시',
      '강한 책임감과 리더십',
      '체계적인 관리 능력',
      '결정을 빠르게 내리는 실행력',
    ],
    growth: [
      '유연한 시각과 의견을 수용하기',
      '감정 표현과 경청 연습하기',
      '과도한 통제 욕구 완화하기',
      '휴식과 관계의 질도 챙기기',
    ],
    spotlight:
      '조직 운영과 프로젝트 관리에서 우수한 성과를 냅니다. 위기에 흔들리지 않고 팀을 안정적으로 이끄는 리더예요.',
    careers: ['운영 총괄 매니저', '프로젝트 디렉터', '공공 행정 관리자'],
    weaknesses: [
      '유연성 부족으로 변화에 저항',
      '감정 표현과 공감이 부족할 수 있음',
      '과도한 통제 욕구',
      '타인의 의견을 간과할 수 있음',
    ],
    relationships: [
      '체계적이고 안정적인 관계를 선호',
      '책임감 있고 신뢰할 수 있는 파트너를 중시',
      '명확한 역할과 기대를 선호',
      '감정 표현보다 행동으로 보여주는 편',
    ],
    romance: '안정적이고 책임감 있는 연애를 추구합니다. 파트너와 명확한 계획과 약속을 지키며, 장기적인 관계를 중시해요. 감정 표현은 서툴러도 행동으로 신뢰를 보여줍니다.',
    detailedTraits: [
      '체계적이고 조직적인 성향',
      '책임감과 리더십',
      '현실적이고 실용적인 접근',
      '전통과 규칙을 중시',
      '결단력과 실행력',
    ],
    recommendedActivities: [
      '프로젝트 관리나 기획',
      '운동이나 규칙적인 활동',
      '조직 활동이나 리더십',
      '계획 세우기와 실행',
      '전통적인 취미 활동',
    ],
  },
  ESFJ: {
    title: '따뜻한 조율가',
    summary:
      '주변 사람의 필요를 살피고 조화를 이끄는 유형이에요. 사람 중심의 환경에서 탁월합니다.',
    narrative:
      '팀의 감정을 섬세하게 감지하고 관계를 이어주는 접착제 역할을 합니다. 모두가 참여하고 성장할 수 있는 분위기를 만듭니다.',
    strengths: [
      '강력한 협업 스킬',
      '사회적 감수성',
      '세심한 지원과 코디네이션',
      '조직 문화를 따뜻하게 만드는 힘',
    ],
    growth: [
      '자기 돌봄을 우선순위에 두기',
      '솔직한 감정 표현 연습하기',
      '갈등을 직접 다루며 조율하기',
      '피로도를 관리해 에너지 유지하기',
    ],
    spotlight:
      '커뮤니티 매니저, 교육자, HR 등 사람과 조직을 잇는 역할에 어울려요. 팀 빌딩과 관계 관리가 핵심인 프로젝트에서 빛납니다.',
    careers: ['조직문화 매니저', '교육 기획자', '고객 성공 매니저'],
    weaknesses: [
      '자기 돌봄을 소홀히 할 수 있음',
      '갈등 상황을 회피하려는 경향',
      '과도한 책임감으로 스트레스가 쌓임',
      '변화에 대한 저항이 있을 수 있음',
    ],
    relationships: [
      '따뜻하고 배려심 있는 관계를 선호',
      '사람들을 연결하고 조화를 이루는 것을 좋아함',
      '감정 표현이 풍부하고 공감 능력이 뛰어남',
      '안정적이고 지속적인 관계를 중시',
    ],
    romance: '따뜻하고 헌신적인 연애를 추구합니다. 파트너를 세심하게 챙기고 배려하며, 함께 안정적인 미래를 만들어가는 것을 좋아해요. 감정 표현이 풍부하고 로맨틱한 스타일입니다.',
    detailedTraits: [
      '배려심 깊고 공감 능력이 뛰어남',
      '조화와 협력을 중시',
      '안정과 질서를 선호',
      '전통과 규칙을 존중',
      '사람 중심의 사고',
    ],
    recommendedActivities: [
      '가족이나 친구들과의 시간',
      '조직 활동이나 봉사',
      '요리나 수공예',
      '교육이나 코칭 활동',
      '전통적인 취미 활동',
    ],
  },
  ENFJ: {
    title: '영감을 주는 리더',
    summary:
      '사람들의 잠재력을 발견하고 성장시켜주는 카리스마가 있어요. 협업과 변화 관리를 동시에 이끕니다.',
    narrative:
      '비전을 공유하고 사람들을 연결하는 데 탁월합니다. 높은 공감력과 추진력을 바탕으로 팀이 하나의 목표를 향해 나아가도록 돕습니다.',
    strengths: [
      '탁월한 동기 부여 능력',
      '조망 능력과 전략적 사고',
      '협력적 커뮤니케이션',
      '갈등을 조정하고 해결하는 힘',
    ],
    growth: [
      '자신의 한계를 인식하고 휴식 확보하기',
      '과도한 책임감을 내려놓기',
      '객관적인 데이터와 함께 판단하기',
      '자기만의 목표와 욕구도 챙기기',
    ],
    spotlight:
      '조직 리더, 코치, 퍼실리테이터로 활약하며 팀에 활력을 불어넣습니다. 변화와 전환이 필요한 순간에 든든한 안내자예요.',
    careers: ['조직 코치', '변화관리 컨설턴트', '사회혁신 리더'],
    weaknesses: [
      '자신의 한계를 인식하지 못할 수 있음',
      '과도한 책임감으로 스트레스가 쌓임',
      '타인의 문제를 자신의 문제로 받아들임',
      '완벽주의로 인한 피로',
    ],
    relationships: [
      '깊고 의미 있는 관계를 추구',
      '사람들의 성장을 돕는 것을 좋아함',
      '감정 표현이 풍부하고 공감 능력이 뛰어남',
      '협력과 조화를 중시',
    ],
    romance: '진정성 있고 헌신적인 연애를 추구합니다. 파트너의 성장을 돕고 함께 발전하며, 깊은 감정적 연결과 의미 있는 대화를 즐겨요. 이상적이고 로맨틱한 사랑을 꿈꿉니다.',
    detailedTraits: [
      '공감 능력과 통찰력이 뛰어남',
      '리더십과 동기 부여 능력',
      '협력과 조화를 중시',
      '미래 지향적이고 비전을 그리는 능력',
      '사람 중심의 사고',
    ],
    recommendedActivities: [
      '리더십이나 코칭 활동',
      '의미 있는 대화와 토론',
      '사회적 가치를 실현하는 활동',
      '예술 감상이나 창작',
      '사람들과의 네트워킹',
    ],
  },
  ENTJ: {
    title: '비전을 실행하는 사령관',
    summary:
      '명확한 목표와 추진력으로 변화를 현실로 만드는 유형이에요. 대담한 전략을 실행하는 리더입니다.',
    narrative:
      '큰 그림을 그리고 필요한 자원을 과감히 배치합니다. 효율성과 성과를 높이기 위해 결단력 있게 움직여요.',
    strengths: [
      '장기 전략 수립 능력',
      '과감한 의사결정',
      '조직을 통솔하는 리더십',
      '복잡한 이슈를 통합하는 통찰',
    ],
    growth: [
      '정서적인 신호에도 귀 기울이기',
      '완급 조절과 휴식 확보하기',
      '타인의 자율성을 존중하기',
      '실행 과정에서 피드백 수렴하기',
    ],
    spotlight:
      '기업가, 조직 리더, 전략 컨설턴트로서 강점을 발휘합니다. 대규모 변화와 확장을 주도할 때 결정적 역할을 해요.',
    careers: ['전략 총괄 임원', '비즈니스 컨설턴트', '벤처 창업가'],
    weaknesses: [
      '감정 표현과 공감이 부족할 수 있음',
      '타인의 속도와 스타일을 이해하기 어려울 수 있음',
      '과도한 통제 욕구',
      '휴식과 여가를 소홀히 할 수 있음',
    ],
    relationships: [
      '지적이고 역동적인 관계를 선호',
      '목표와 비전을 공유하는 파트너를 중시',
      '독립적이지만 협력적인 스타일',
      '감정 표현보다 논리적 대화를 선호',
    ],
    romance: '목표 지향적이고 역동적인 연애를 선호합니다. 파트너와 함께 성장하고 발전하며, 명확한 계획과 비전을 공유하는 관계를 원해요. 감정 표현은 서툴러도 행동으로 신뢰를 보여줍니다.',
    detailedTraits: [
      '전략적이고 체계적인 사고',
      '리더십과 결단력',
      '장기적인 비전과 목표 설정',
      '효율성과 성과를 중시',
      '독립적이지만 협력적인 성향',
    ],
    recommendedActivities: [
      '전략 기획이나 리더십',
      '비즈니스나 창업 활동',
      '운동이나 규칙적인 활동',
      '목표 달성을 위한 프로젝트',
      '지적 네트워킹',
    ],
  },
};

const DEFAULT_DESCRIPTION = {
  title: '균형 잡힌 탐색가',
  summary: '아직 모든 질문에 답하지 않았어요. 조금만 더 진행해볼까요?',
  narrative:
    '각 질문에 성실하게 답해 나가면 나만의 패턴이 조금씩 드러나게 됩니다. 지금은 탐색 중이지만, 이미 자신을 이해하려는 멋진 여정이 시작됐어요.',
  strengths: ['다양한 가능성을 탐색하는 중', '스스로를 알아가는 과정', '새로운 선택을 위한 준비'],
  weaknesses: ['아직 탐색 중이에요', '결과를 확인하려면 모든 질문에 답해주세요'],
  growth: ['모든 질문에 마음을 담아 답해보기', '느껴지는 감정도 메모해보기', '결과를 주변과 나눠보기'],
  spotlight: '나만의 페이스로 천천히 진행하면 더 명확한 결과를 얻을 수 있어요.',
  careers: ['관심 분야를 기록해 보기', '검사 후 인사이트 공유하기', '자기계발 관련 도서 탐색'],
  relationships: ['검사를 완료하면 인간관계 스타일을 확인할 수 있어요'],
  romance: '모든 질문에 답하면 연애 스타일을 확인할 수 있어요.',
  detailedTraits: ['검사를 완료하면 상세한 성격 특성을 확인할 수 있어요'],
  recommendedActivities: ['관심 분야를 기록해 보기', '검사 후 인사이트 공유하기', '자기계발 관련 도서 탐색'],
};

type AnswerMap = Record<string, string>;

const buildLetterScores = (answers: AnswerMap) => {
  const scores: Record<string, number> = {
    E: 0,
    I: 0,
    S: 0,
    N: 0,
    T: 0,
    F: 0,
    J: 0,
    P: 0,
  };

  QUESTIONS.forEach((question) => {
    const selected = answers[question.id];
    if (selected) {
      scores[selected] += 1;
    }
  });

  return scores;
};

const deriveType = (answers: AnswerMap) => {
  const scores = buildLetterScores(answers);
  const letters = (Object.keys(TRAIT_PAIRS) as MBTIDimension[]).map((dimension) => {
    const [primary, secondary] = TRAIT_PAIRS[dimension];
    const primaryScore = scores[primary] ?? 0;
    const secondaryScore = scores[secondary] ?? 0;
    if (primaryScore === secondaryScore) {
      return primary;
    }
    return primaryScore > secondaryScore ? primary : secondary;
  });
  return letters.join('');
};

const buildBreakdown = (answers: AnswerMap) => {
  const scores = buildLetterScores(answers);
  return (Object.keys(TRAIT_PAIRS) as MBTIDimension[]).map((dimension) => {
    const [primary, secondary] = TRAIT_PAIRS[dimension];
    const primaryScore = scores[primary];
    const secondaryScore = scores[secondary];
    const total = primaryScore + secondaryScore || 1;
    return {
      dimension,
      primary,
      secondary,
      primaryScore,
      secondaryScore,
      primaryRatio: Math.round((primaryScore / total) * 100),
    };
  });
};

export default function HomePage() {
  const [currentPage, setCurrentPage] = useState(1);
  const [answers, setAnswers] = useState<AnswerMap>({});
  const [showResult, setShowResult] = useState(false);
  const answeredCount = useMemo(() => Object.keys(answers).length, [answers]);
  const completion = Math.round((answeredCount / QUESTIONS.length) * 100);
  const allAnswered = answers['q50'] !== undefined; // 50번째 질문에 답했을 때 결과 표시
  const type = useMemo(() => (allAnswered ? deriveType(answers) : null), [allAnswered, answers]);
  const breakdown = useMemo(() => buildBreakdown(answers), [answers]);
  const paginatedQuestions = useMemo(() => {
    const start = (currentPage - 1) * QUESTIONS_PER_PAGE;
    return QUESTIONS.slice(start, start + QUESTIONS_PER_PAGE);
  }, [currentPage]);
  const startQuestionNumber = (currentPage - 1) * QUESTIONS_PER_PAGE;
  const isFirstPage = currentPage === 1;
  const isLastPage = currentPage === TOTAL_PAGES;
  const pageNumbers = useMemo(
    () => Array.from({ length: TOTAL_PAGES }, (_, index) => index + 1),
    []
  );

  const description = type ? TYPE_DESCRIPTIONS[type] ?? DEFAULT_DESCRIPTION : DEFAULT_DESCRIPTION;

  const handleSelect = (questionId: string, value: string) => {
    setAnswers((prev) => ({
      ...prev,
      [questionId]: value,
    }));
  };

  const handleReset = () => {
    setAnswers({});
    setCurrentPage(1);
    setShowResult(false);
  };

  const handleShowResult = () => {
    setShowResult(true);
  };

  const handlePageChange = (page: number) => {
    setCurrentPage(page);
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };

  const handlePrevPage = () => {
    if (!isFirstPage) {
      handlePageChange(currentPage - 1);
    }
  };

  const handleNextPage = () => {
    if (!isLastPage) {
      handlePageChange(currentPage + 1);
    }
  };

  return (
    <main className="mx-auto flex min-h-screen w-full max-w-5xl flex-col gap-10 px-5 py-12">
      <section className="rounded-3xl border border-divider bg-[#1b1b1b] p-8 text-white shadow-2xl">
        <p className="text-sm uppercase tracking-[0.4em] text-brand">OKKI MBTI LAB</p>
        <h1 className="mt-4 text-3xl font-bold leading-tight sm:text-4xl">
          지금 바로 나의 심리 성향을 진단해보세요
        </h1>
        <p className="mt-3 max-w-3xl text-base text-subtext sm:text-lg">
          50개의 질문에 답하면 나만의 MBTI 유형을 알려드려요. 결과와 함께 강점, 성장 포인트,
          추천 활동까지 확인할 수 있습니다.
        </p>

        <div className="mt-8">
          <div className="flex justify-between text-sm text-subtext">
            <span>진행률</span>
            <span>{completion}%</span>
          </div>
          <div className="mt-2 h-2 w-full overflow-hidden rounded-full bg-[#1f1f1f]">
            <div
              className="h-full rounded-full bg-brand transition-all duration-500"
              style={{ width: `${completion}%` }}
            />
          </div>
        </div>

        <div className="mt-6 flex flex-wrap gap-3 text-xs text-subtext sm:text-sm">
          {breakdown.map(({ dimension, primary, secondary, primaryRatio }) => (
            <span
              key={dimension}
              className="flex items-center gap-2 rounded-full border border-divider bg-[#1f1f1f] px-3 py-1"
            >
              <strong className="text-white">{primaryRatio}%</strong>
              {TRAIT_LABEL[primary]} vs {TRAIT_LABEL[secondary]}
            </span>
          ))}
        </div>
      </section>

      <section className="grid grid-cols-1 gap-6">
        {paginatedQuestions.map((question, index) => (
          <MBTIQuestionCard
            key={question.id}
            index={startQuestionNumber + index}
            prompt={question.prompt}
            options={question.options}
            selectedValue={answers[question.id]}
            onSelect={(value) => handleSelect(question.id, value)}
          />
        ))}
      </section>

      <nav className="flex flex-col items-center gap-4 rounded-2xl border border-divider bg-[#1a1a1a] p-5 shadow-lg sm:flex-row sm:justify-between">
        <button
          type="button"
          onClick={handlePrevPage}
          disabled={isFirstPage}
          className={`w-full rounded-full px-4 py-2 text-sm font-semibold transition sm:w-auto ${
            isFirstPage
              ? 'cursor-not-allowed bg-[#242424] text-subtext/60'
              : 'bg-[#242424] text-subtext hover:bg-brand/80 hover:text-white'
          }`}
        >
          이전
        </button>
        <div className="flex flex-wrap justify-center gap-2">
          {pageNumbers.map((page) => {
            const isActive = page === currentPage;
            return (
              <button
                key={page}
                type="button"
                onClick={() => handlePageChange(page)}
                className={`h-10 w-10 rounded-full border text-sm font-semibold transition ${
                  isActive
                    ? 'border-brand bg-brand text-white'
                    : 'border-divider bg-[#1f1f1f] text-subtext hover:border-brand/60 hover:text-white'
                }`}
              >
                {page}
              </button>
            );
          })}
        </div>
        <button
          type="button"
          onClick={handleNextPage}
          disabled={isLastPage}
          className={`w-full rounded-full px-4 py-2 text-sm font-semibold transition sm:w-auto ${
            isLastPage
              ? 'cursor-not-allowed bg-[#242424] text-subtext/60'
              : 'bg-[#242424] text-subtext hover:bg-brand/80 hover:text-white'
          }`}
        >
          다음
        </button>
      </nav>

      {currentPage === 5 && allAnswered && !showResult && (
        <section className="rounded-3xl border border-divider bg-[#181818] p-8 text-white shadow-inner">
          <div className="flex flex-col items-center gap-6 text-center">
            <p className="text-lg font-semibold text-white">
              모든 질문에 답하셨습니다!
            </p>
            <p className="text-sm text-subtext">
              결과를 확인하시겠어요?
            </p>
            <button
              type="button"
              onClick={handleShowResult}
              className="rounded-full bg-brand px-8 py-3 text-sm font-semibold text-white transition hover:bg-brand/90"
            >
              결과 확인
            </button>
          </div>
        </section>
      )}

      {currentPage === 5 && showResult && (
      <section className="rounded-3xl border border-divider bg-[#181818] p-8 text-white shadow-inner">
        <div className="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
          <div>
            <p className="text-sm uppercase tracking-[0.4em] text-subtext">
              나의 MBTI 결과
            </p>
            <h2 className="mt-2 text-2xl font-bold sm:text-3xl">
              {type ?? '아직 결과가 준비되지 않았어요'}
            </h2>
          </div>
          <button
            type="button"
            onClick={handleReset}
            className="w-full rounded-full bg-[#242424] px-6 py-3 text-sm font-semibold text-subtext transition hover:bg-brand/90 hover:text-white sm:w-auto"
          >
            다시 검사하기
          </button>
        </div>

        <div className="mt-6 flex flex-wrap gap-3 text-xs text-subtext sm:text-sm">
          {breakdown.map(({ dimension, primary, secondary, primaryRatio }) => (
            <span
              key={dimension}
              className="flex items-center gap-2 rounded-full border border-divider bg-[#1f1f1f] px-3 py-1"
            >
              <strong className="text-white">{primaryRatio}%</strong>
              {TRAIT_LABEL[primary]} vs {TRAIT_LABEL[secondary]}
            </span>
          ))}
        </div>

        <div className="mt-6 grid gap-6 sm:grid-cols-1 md:grid-cols-2">
          {breakdown.map(({ dimension, primary, secondary, primaryRatio }) => {
            const dimDesc = DIMENSION_DESCRIPTIONS[dimension];
            const isPrimary = primaryRatio >= 50;
            return (
              <article
                key={dimension}
                className="rounded-2xl border border-divider bg-[#1e1e1e] p-5"
              >
                <h3 className="mb-3 text-sm font-semibold text-brand">
                  {TRAIT_LABEL[primary]} vs {TRAIT_LABEL[secondary]}
                </h3>
                <div className="space-y-3">
                  <div>
                    <div className="mb-1 flex items-center gap-2">
                      <span className={`text-sm font-medium ${isPrimary ? 'text-brand' : 'text-subtext'}`}>
                        {TRAIT_LABEL[primary]} ({primaryRatio}%)
                      </span>
                    </div>
                    <p className="text-xs text-subtext">{dimDesc.primaryDesc}</p>
                  </div>
                  <div>
                    <div className="mb-1 flex items-center gap-2">
                      <span className={`text-sm font-medium ${!isPrimary ? 'text-brand' : 'text-subtext'}`}>
                        {TRAIT_LABEL[secondary]} ({100 - primaryRatio}%)
                      </span>
                    </div>
                    <p className="text-xs text-subtext">{dimDesc.secondaryDesc}</p>
                  </div>
                </div>
              </article>
            );
          })}
        </div>

        <div className="mt-6 grid gap-6 sm:grid-cols-2 lg:grid-cols-4">
          <article className="rounded-2xl border border-divider bg-[#1e1e1e] p-5 lg:col-span-2">
            <h3 className="text-sm font-semibold text-brand">{description.title}</h3>
            <p className="mt-2 text-sm text-subtext">{description.summary}</p>
            <p className="mt-3 text-sm text-subtext/90">{description.narrative}</p>
          </article>

          <article className="rounded-2xl border border-divider bg-[#1e1e1e] p-5">
            <h3 className="text-sm font-semibold text-brand">강점</h3>
            <ul className="mt-2 space-y-2 text-sm text-subtext">
              {description.strengths.map((item) => (
                <li key={item}>• {item}</li>
              ))}
            </ul>
          </article>

          <article className="rounded-2xl border border-divider bg-[#1e1e1e] p-5">
            <h3 className="text-sm font-semibold text-brand">약점</h3>
            <ul className="mt-2 space-y-2 text-sm text-subtext">
              {description.weaknesses.map((item) => (
                <li key={item}>• {item}</li>
              ))}
            </ul>
          </article>
        </div>

        <div className="mt-6 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
          <article className="rounded-2xl border border-divider bg-[#1e1e1e] p-5">
            <h3 className="text-sm font-semibold text-brand">성장 포인트</h3>
            <ul className="mt-2 space-y-2 text-sm text-subtext">
              {description.growth.map((item) => (
                <li key={item}>• {item}</li>
              ))}
            </ul>
          </article>

          <article className="rounded-2xl border border-divider bg-[#1e1e1e] p-5">
            <h3 className="text-sm font-semibold text-brand">추천 활동</h3>
            <ul className="mt-2 space-y-2 text-sm text-subtext">
              {description.recommendedActivities.map((item) => (
                <li key={item}>• {item}</li>
              ))}
            </ul>
          </article>

          <article className="rounded-2xl border border-divider bg-[#1e1e1e] p-5">
            <h3 className="text-sm font-semibold text-brand">추천 커리어</h3>
            <ul className="mt-2 space-y-2 text-sm text-subtext">
              {description.careers.map((item) => (
                <li key={item}>• {item}</li>
              ))}
            </ul>
          </article>
        </div>

        <div className="mt-6 grid gap-6 sm:grid-cols-2">
          <article className="rounded-2xl border border-divider bg-[#1e1e1e] p-5">
            <h3 className="text-sm font-semibold text-brand">인간관계 스타일</h3>
            <ul className="mt-2 space-y-2 text-sm text-subtext">
              {description.relationships.map((item) => (
                <li key={item}>• {item}</li>
              ))}
            </ul>
          </article>

          <article className="rounded-2xl border border-divider bg-[#1e1e1e] p-5">
            <h3 className="text-sm font-semibold text-brand">연애 스타일</h3>
            <p className="mt-2 text-sm text-subtext">{description.romance}</p>
          </article>
        </div>

        <div className="mt-6 rounded-2xl border border-divider bg-[#1e1e1e] p-5">
          <h3 className="text-sm font-semibold text-brand">상세 성격 특성</h3>
          <ul className="mt-2 space-y-2 text-sm text-subtext">
            {description.detailedTraits.map((item) => (
              <li key={item}>• {item}</li>
            ))}
          </ul>
        </div>

        <div className="mt-6 rounded-2xl border border-dashed border-brand/40 bg-brand/5 p-5 text-sm text-brand">
          {description.spotlight}
        </div>
      </section>
      )}
    </main>
  );
}


